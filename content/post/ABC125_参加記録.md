---
title: "ABC125 参加記録"
date: 2019-04-28T16:56:34+09:00
archives: "2019/04"
tags: [競技プログラミング, AtCoder]
---

昨日（2019/04/27）AtCoderで開催された、AtCoder Beginner Contest 125に参加しました。
<!--more-->

```
2019/4/27 AtCoder Beginner Contest 125
Rank: 2156(unrated)
Perf: 0
Rating: 1214(+0)
```

`Rated対象: ~ 1199`だったので、レート変化はなしです。（unratedでもPerformance計算はしてほしい。）

次回のABCからレート対象の範囲が変わるそうなので、楽しみです。

今回は家族旅行中で、京都の温泉から参加しました。
時間がなかったので、一見難しそうだったD問題のみ提出しました。
C問題も考察しましたが、自信のある解法がすぐ浮かんだため、提出はしていません。

---
### C - GCD on Blackboard
https://atcoder.jp/contests/abc125/tasks/abc125_c

$N$個の整数から、最大公約数が最大になるように$(N-1)$個を選ぶ問題です。

すぐにメモを用いた方法を思いつきました。公式解説の方法と同じです。

$A_i$以外でGCDを取る場合、$A_0$~$A\_{i-1}$のGCDと、$A\_{i+1}$~$A_N$のGCDのGCDを取ればよいです。

左右のGCDをメモすればいいことがわかります。

---
### D - Flipping Signs
https://atcoder.jp/contests/abc125/tasks/abc125_d

長さ$N$の数列が与えられます。
連続した2数の符号を反転させる操作が任意の回数認められるときの、最大化した数列の総和を求めます。

#### はじめに考えた解法

数列の前から順に、反転する/しないを順に判断していくとき、位置$i$での判断に位置$i-1$以前の数字は影響しません。ですので、前から貪欲に説いて行かば良いのでは？と考えました。

まず、DPを用いた手法を考えました。

- $DP[i][0]$ : $i$番目までを操作し、得られる総和$(B_1 + B_2 + ... + B_i)$。ただし、**$A_i=B_i$**。
- $DP[i][1]$ : $i$番目までを操作し、得られる総和$(B_1 + B_2 + ... + B_i)$。ただし、**$A_i=-B_i$**。

しかし漸化式の考察中に、次の解法に気づきました。

#### ACした解法（公式解説と同じ）

上のDPの漸化式を考える仮定で、小さい$N$で、反転操作のパターンを列挙してみました。

たとえばN=4で、反転しないものを$-$、反転するものを$+$と書くと、以下の8パターンがあります。

- $+ + + +$
- $+ + - -$
- $+ - - +$
- $+ - + -$
- $- - + +$
- $- - - -$
- $- + - +$
- $- + + -$

ここで、すべてのパターンで、$-$の数がどれも偶数になっていることに気が付きました。
(この例では$+$も偶数個ですが、$N$が奇数のとき、$+$は奇になります。)

そこで、**{「ある$+-$パターンが反転操作で作ることができる」$\iff$「$-$の個数が偶数」}**という予想が立てられます。

右向きの条件は、以下の例で偶奇を見ることで簡単に証明できます。

- $+ +$の反転は$- -$
- $+ -$の反転は$- +$
- $- +$の反転は$+ -$
- $- -$の反転は$+ +$

左向きの条件も、この例を使って証明できます。

たとえば、2つ目の例（$+ -$の反転）を用いると、任意の場所の$-$を左に寄せることができます。
すべての$-$を左に寄せ、$- -$の反転を用いてば、**$=$の個数が偶数のときのみ**すべて$+$へ変換できます。
よって、この逆の操作を行えば、$-$の数が偶の任意のパターンを作ることができます。

こうして必要十分が証明できました。

上記の事から、**数列$A_i$のうち、負数が偶数個の場合**は、すべての負数を正に変換できます。
よってこの場合の数列$B$の総和は、数列$A$の絶対値の総和となります。

**数列$A_i$のうち、負数が奇数個の場合**は、正に変換できない負数が1つ残る場合と、もともと正の数を1つ負に変換してしまう場合が考えられます。
どちらの場合も、その選ばれた数$A_i$の絶対値のより小さい方が、良い結果となります。
よってこの場合の数列$B$の総和は、$(($数列$A$の絶対値の総和$)-2*($絶対値が最小の$A_i))$となります。

こうすることで、十分速い速度でACがとれました。

以上、広島の温泉からでした。
明日は熊本まで向います。
