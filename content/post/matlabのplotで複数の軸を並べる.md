---
title: "Matlabのplotで複数の軸を並べる"
date: 2019-04-16T10:06:23+09:00
archives: "2019"
tags: [matlab]
---

某大学某学部某学科某コースでは、毎年多くの**matlabのplotに複数軸を配置できない難民**が発生します。
この記事は、そのような難民を救済することを目的に書かれています。

ここで言う**複数軸**とは、以下のようなものを指します。
![複数軸を配置したplot](/blog/img/matlab_axes.jpg)

## code
とりあえずMatlabコードを張っておきます。
これを実行すれば、上記のグラフが作れると思います。
``` m
X = 0:.1:2*pi
Y = sin(X)

% figure(図) を作成
figure('Name','グラフ例');

% axes(プロット領域) を作成
axes1 = axes('Position',[0.1, 0.25, 0.8, 0.65]);  % Position [左下x座標, 左下y座標, 幅, 高さ]
hold(axes1,'on');  % 「これから,この領域内で作業するよ」宣言

% stem(離散データ列のプロット) を作成
% stem()をplot(),scatter(),area()などに変更すると、グラフの種類が変わる
stem(X,Y);

% 軸の範囲
xlim(axes1,[0, 2*pi]);
ylim(axes1,[-1.2, 1.2]);

% grid(網目) をつける
grid(axes1,'on');

% 残りの座標軸プロパティの設定
% 刻み幅は一定でなくても良い
set(axes1, ... 領域1について、
    'FontSize', 10, ... 文字サイズ10
    ...
    'XTick', [0, pi/6, pi/4, pi/3, pi/2, 2*pi/3, 3*pi/4, 5*pi/6, pi, 3*pi/2, 2*pi], ... x方向の刻み
    'YTick', [-1, -0.5, 0, 0.5, sqrt(2)/2, sqrt(3)/2, 1], ... y方向の刻み
    ...
    'TickLabelInterpreter','latex', ... 目盛りテキストをLaTex記法で数式などを綺麗に書ける
    'XTickLabel', ... x軸の目Z盛りテキスト
        {'0', '$$\frac{\pi}{6}$$', '$$\frac{\pi}{4}$$',' $$\frac{\pi}{3}$$', '$$\frac{\pi}{2}$$', '$$\frac{2\pi}{3}$$', ...
        '$$\frac{3\pi}{4}$$', '$$\frac{5\pi}{6}$$', '$$\pi$$', '$$\frac{3\pi}{2}$$',' $$2\pi$$'}, ...
    'YTickLabel', ... y軸の目盛りテキスト
        {'-1','-0.5','0','0.5','$$\sqrt{2}/2$$','$$\sqrt{3}/2$$','1'} ...
    );
xlabel('位相(rad)');
ylabel('正弦波');
% axes(プロット領域) を作成
% 領域の高さを0とすることで、横軸だけを作成できる
axes2 = axes('Position',[0.1, 0.1, 0.8, 0]);  % Position [左下x座標, 左下y座標, 幅, 高さ]
hold(axes2,'on');  % 「これから,この領域内で作業するよ」宣言
xlim(axes2,[0, 360]); % 軸の範囲
% 残りの座標軸プロパティの設定
set(axes2, ... 領域1について、
    'FontSize', 10, ... 文字サイズ10
    ...
    'XTick', 0:60:360, ... x方向の刻み
    ...
    'TickLabelInterpreter','latex', ... 目盛りテキストをLaTex記法で数式などを綺麗に書ける
    'XTickLabel', ... x軸の目盛りテキスト
        {'0', '60', '120', '180', '240', '300', '360'}...
    );
xlabel('位相(°)');
```

## 種明かし
コード内にも書いてあるのですが、追加された軸の正体は**高さ0のグラフ**です。

あまり綺麗な実装とは言えませんが、他の方法が公式で用意されていないため、仕方ありません。
(公式ドキュメントのどこかでこの方法を知った気がするけど、見つけられなかった。)

figure内での座標指定など、軸が1つのときは必要ない設定があるため、コードが長くなってしまいます。

X,Y,xlim,ylimくらいはコードを書き換えて、その他の設定は**GUI上での操作をおすすめします**。
Figureウィンドウの表示タブからプロパティエディターを開くことができます。
